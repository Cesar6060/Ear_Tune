{% extends 'ear_tune/base.html' %}
{% load static %}

{% block title %}{{ game.name }} - Challenge{% endblock %}

{% block content %}
<div>
  <h2>{{ challenge.get_challenge_type_display }}</h2>
  <p>{{ challenge.prompt }}</p>

  {# Render an audio player if the challenge is a note challenge and an audio file is provided #}
  {% if challenge.challenge_type == "note" and audio_file %}
    <audio controls>
      <source src="{% static 'audio/notes/' %}{{ audio_file }}" type="audio/wav">
      Your browser does not support the audio element.
    </audio>
  {% else %}
    {# Optionally, display a debug message if no audio file is set #}
    <!-- Audio file not set: {{ audio_file }} -->
  {% endif %}

  <form method="post">
    {% csrf_token %}
    {{ form.as_p }}
    <button type="submit">Submit Answer</button>
  </form>

  {% if result %}
    <p>{{ result }}</p>
  {% endif %}
</div>
{% endblock %}
